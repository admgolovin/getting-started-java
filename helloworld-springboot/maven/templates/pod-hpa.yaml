- apiVersion: autoscaling/v1
  kind: HorizontalPodAutoscaler
  metadata:
    name: maven-java-app
    namespace: default
  spec:
    maxReplicas: {{ .Values.autoscailing.maxReplicas }}
    minReplicas: {{ .Values.autoscailing.minReplicas }}
    scaleTargetRef:
      apiVersion: extensions/v1beta1
      kind: Deployment
      {{- if .Values.productionSlot eq "blue"}}
      name: {{ include "MyApp.fullname" . }}-blue
      {{- else }}
      name: {{ include "MyApp.fullname" . }}-green
      {{- end }}
    targetCPUUtilizationPercentage: {{ .Values.autoscailing.cpu }}